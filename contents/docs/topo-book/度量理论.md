---
~
---

第八章的研究对象是Lebesgue积分。我们将要推导的是度量理论（measure theory）的核心内容：集合的测度（measure）和覆盖性质。

我们主要看以下这几个方面：

1. 积分的定义
2. 可积性的判据（必要条件和充分条件）
3. 性质与收敛性
4. 计算和估计积分

## 1.1 积分的定义

### 1.1.1 几何动机
积分本质上是计算函数下方区域的「体积（volume）」。如何定义这种「体积」会直接改变到积分的性质。我们的目的是为了计算任意曲线 $y = f(x)$ 从 $a$ 到 $b$ 下方区域的面积

Lebesgue积分定义的逻辑步骤如下：


1. **定义**：任意有界函数$f$于在高维空间中的有界区域 $A$ （bounded）上。
2. **简化问题**：由于曲线下方区域通常不是规则形状，我们需要用近似方法来计算。我们可以将区间 $[a,b]$ 分成若干小区间，然后用矩形来近似。将区域 $A$ 嵌入到一个矩形区域 $B$ 中，并将函数 $f$ 扩展为函数 $f̃$，使其在 $A$ 之外的 $B$ 上取值为零
3. **分割**：划分矩形 $B$ 为更小的矩形，来创建一个**分割结构**（partition）。
4. **构造上下近似**：对每个小矩形，通过这种方式，我们可以获得两种近似：一种是偏大的（上和），一种是偏小的（下和）。
    1. **上和**: $U(f, P) = \sum_{i=1}^{n} (\sup f(x)) \cdot \ell(I_i)$ 
    2. 对每个小区间 $I_i$，我们找出函数在该区间上的最大值 $\sup f(x)$，然后乘以区间长度 $\ell(I_i)$。这样形成的矩形面积之和总是大于或等于真实面积。
    3. **下和**: $L(f, P) = \sum_{i=1}^{n} (\inf f(x)) \cdot \ell(I_i)$
    4. 对每个小区间 $I_i$，我们找出函数在该区间上的最小值 $\inf f(x)$，然后乘以区间长度 $\ell(I_i)$。这样形成的矩形面积之和总是小于或等于真实面积。

5. 当我们让分割变得越来越细时，上和会减小，下和会增大。它们的极限值就定义了上积分和下积分。当这两个极限值相等时，我们就说这个函数是**可积的（integrable）**。

### 1.1.2 一般表述

#### 设定

Let $f: A \to \mathbb{R}$ be a bounded function on a bounded set $A$ in $\mathbb{R}^n$.  We want to define the "volume" of the region under the surface $y = f(x)$ (or the integral $\int_A f(x) dx$).

#### 步骤1：选择一个矩形$B$
为了简化计算，我们首先选择一个包含 $A$ 的**矩形区域$B$**，并将函数 $f$ 扩展到整个矩形上。选择包含 $A$ 的矩形 $B = [a_1, b_1] \times [a_2, b_2] \times ... \times [a_n, b_n]$ 并且扩展函数 $f$ 使得当 $x \notin A$ 时，$f(x) = 0$

#### 步骤2：对B进行分割（partition）
我们将矩形 $B$ 的各边分割成若干个子区间（subintervals），得到一个分割 $P$（partition $P$）的小矩形的集合。

#### 步骤3：构造上下和（upper and lower sums）
对于每个小矩形 $R$，我们找出函数在其上的最大值 $\sup f(x)$，和最小值 $\inf f(x)$，乘以矩形的体积 $V(R)$，然后求和。
- **上和**（US）: $$U(f, P) = \sum_{R \in P} (\sup f(x)) \cdot V(R)$$

- **下和** （LS）: $$L(f, P) = \sum_{R \in P} (\inf f(x)) \cdot V(R)$$

#### 步骤4：构造上下积分

与一维情况相同，我们定义上积分和下积分作为US和LS的极限。所有可能分割对应的下和的上确界:

- **上积分**: $$\overline{\int_A} f = \inf_P U(f, P)$$


- **下积分**: $$\underline{\int_A} f = \sup_P L(f, P)$$

#### 重要观察

很明显，我们有 $L(f, P) \leq$ “真实体积” $\leq U(f, P)$。下积分和上积分分别是真实体积的下界和上界：

$$\underline{\int_{A}}f \leq\text{“real volume” }\leq \overline{\int_A} f$$

## 1.2 函数的可积性及其积分
现在我们可以正式定义函数的可积性及其积分。

> [!theorem|*]
> 我们称函数 $f$ 是**黎曼可积（Riemann integrable）**的，当且仅当：
$$\overline{\int_A} f = \underline{\int_A} f$$
> 函数 $f$ 在 $A$ 上的积分定义为：$\int_A f(x)dx = \overline{\int_A} f = \underline{\int_A} f$。


### 1.2.1 一般设定：

在我们讨论积分时，通常默认以下条件成立：
1. 函数有界：$f: A \subset \mathbb{R}^n \to \mathbb{R}$ bounded；
2. 定义域有界： $A \subset B$ is bounded；
3. 矩形区域： $B$ is a rectangle in $\mathbb{R}^n$；
4. 零延拓：函数 f 在集合 A 外部定义为 0，即：
$$f(x) = 0, \quad \forall x \notin A$$



### 1.2.2 黎曼条件（Riemann's Condition）

这意味着我们可以找到一个足够细的分割，使得上和与下和的差小于任意给定的正数 $\varepsilon$。换句话说，随着分割变得越来越细，上和和下和会无限接近。
> [!theorem|*]
> For $f$ to be (Riemann) integrable, $\forall \varepsilon > 0$, $\exists$ partition $P_\varepsilon$ (of $B$) s.t. $$0 \leq U(f, P_\varepsilon) - L(f, P_\varepsilon) < \varepsilon$$


### 1.2.3 达布条件（Darboux's Condition）

达布条件是黎曼可积性的另一个等价表述。

> [!theorem|*]
> $\forall \varepsilon > 0$, $\exists P_\delta$ s.t. if:
> 1. $P$ is any partition of $B$ into rectangles $B_1, B_2, ..., B_N$ with side length $< \delta$
> 2. $x \in B_1, x \in B_2, ..., x \in B_N$, then we have: $\left|\sum_{i=1}^N f(x_i)V(B_i) - I\right| < \varepsilon$ where the number $I$ is the value of the integral.

$\forall \varepsilon > 0$，$\exists P_0$ 使得如果：
1. $P$ 是将 $B$ 分割成矩形 $B_1, B_2, ..., B_N$ 的任意分割，且这些矩形的边长 $< \delta$
2. 如果 $x \in B_1, x \in B_2, ..., x \in B_N$，那么我们有：
    $\left|\sum_{i=1}^N f(x_i)V(B_i) - I\right| < \varepsilon$
其中 $I$ 是积分值。

- **解释**: 达布条件说的是，当分割足够细时（每个矩形的边长小于某个 $\delta$），黎曼和（在每个小矩形上取一点计算函数值，乘以体积，然后求和）会非常接近积分值 $I$。

达布条件也可以表述为：
$\forall \varepsilon > 0$，$\exists$ 分割 $P_{\varepsilon}$ 使得
$0 \leq U(f, P_{\varepsilon}) - L(f, P_{\varepsilon}) < \varepsilon$

- **解释**: 这一表述与黎曼条件形式上相同，但强调了这是达布条件的一个等价形式。

## 备注
- 数字 $I$ 是积分的值
  - **解释**: $I$ 代表函数 $f$ 在区域 $A$ 上的积分值。

- 称为关于 $P$ 的 $f$ 的黎曼和
  - **解释**: 黎曼和是一种近似积分的方法，根据一个分割 $P$，在每个小区域内选取一点，计算函数值，乘以区域的大小，然后求和。

- 解释：达布条件说当分割足够细时（边长 $< \delta$），黎曼和是积分的良好近似。
  - **解释**: 这表明，随着分割变得越来越细，黎曼和会收敛到真实的积分值。

## 定理
**解释**: 下面的定理表明，我们之前讨论的条件是等价的。这很重要，因为不同的条件可能在不同的情境下更容易验证或应用。

以下条件是等价的：
1. $f$ 在 $A$ 上可积
   - **解释**: 上积分等于下积分。

2. $f$ 满足黎曼条件
   - **解释**: 可以找到足够细的分割使上和与下和的差小于任意给定的正数。

3. $f$ 满足达布条件
   - **解释**: 对于足够细的分割，黎曼和接近积分值。

## 定理证明
**解释**: 现在我们来证明这些条件的等价性。我们需要证明：1⇒2，2⇒1，以及其他等价关系。

### 步骤1：$f$ 可积 $\Rightarrow$ 黎曼条件
**解释**: 首先，我们证明如果函数可积，那么它满足黎曼条件。

假设，如果 $\varepsilon > 0$：

因为 $\overline{\int_A} f = \underline{\int_A} f$，且根据上确界和下确界的定义，
$\exists P_\varepsilon$ 使得
$0 \leq U(f, P_\varepsilon) - L(f, P_\varepsilon) < \varepsilon$

- **解释**: 由于可积性意味着上积分等于下积分，我们可以找到一个分割，使得上和和下和足够接近。

### 步骤2：黎曼条件 $\Rightarrow$ $f$ 可积
**解释**: 现在，我们证明如果函数满足黎曼条件，那么它是可积的。

假设，$\forall \varepsilon > 0$，$\exists P_\varepsilon$ 使得
$0 \leq U(f, P_\varepsilon) - L(f, P_\varepsilon) < \varepsilon$

因为 $\overline{\int_A} f \leq U(f, P_\varepsilon)$ 且 $\underline{\int_A} f \geq L(f, P_\varepsilon)$：

$\Rightarrow 0 \leq \overline{\int_A} f - \underline{\int_A} f \leq U(f, P_\varepsilon) - L(f, P_\varepsilon) < \varepsilon$

- **解释**: 我们利用上积分是所有上和的下确界，而下积分是所有下和的上确界，得到上积分与下积分的差小于 $\varepsilon$。

由于 $\overline{\int_A} f - \underline{\int_A} f < \varepsilon$ 对任意的 $\varepsilon > 0$ 成立：

$\overline{\int_A} f - \underline{\int_A} f = 0$

- **解释**: 如果两个数的差小于任意正数，那么它们必须相等。

因此 $\overline{\int_A} f = \underline{\int_A} f \Rightarrow f$ 可积。

- **解释**: 这就证明了函数是可积的。

## 构造细分分割
**解释**: 在定理的证明中，我们需要构造特定的分割。下面是这一过程的详细说明。

因为 $\overline{\int_A} f = \inf_P U(f,P)$，根据下确界的定义，$\exists P_1$ 使得 
$U(f, P_1) < \overline{\int_A} f + \frac{\varepsilon}{2}$

- **解释**: 我们可以找到一个分割 $P_1$，使得它对应的上和与上积分的差小于 $\frac{\varepsilon}{2}$。

类似地，$\exists$ 分割 $P_2$ 使得
$L(f, P_2) > \underline{\int_A} f - \frac{\varepsilon}{2}$

- **解释**: 同样，我们可以找到一个分割 $P_2$，使得它对应的下和与下积分的差小于 $\frac{\varepsilon}{2}$。

设 $P_\varepsilon = P_1 \cup P_2$（共同细分）

- **解释**: 我们将两个分割合并，得到一个新的、更细的分割。

那么 $P_\varepsilon$ 是 $P_1$ 和 $P_2$ 的细分。

细分的性质：
- $U(f, P_\varepsilon) \leq U(f, P_1)$（细分会使上和减小）
  - **解释**: 当分割变得更细时，上和不会增加，因为我们更准确地逼近了函数的最大值。

- $L(f, P_\varepsilon) \geq L(f, P_2)$（细分会使下和增大）
  - **解释**: 当分割变得更细时，下和不会减小，因为我们更准确地逼近了函数的最小值。

因此：
$U(f, P_\varepsilon) - L(f, P_\varepsilon) \leq U(f, P_1) - L(f, P_2)$

$< (\overline{\int_A} f + \frac{\varepsilon}{2}) - (\underline{\int_A} f - \frac{\varepsilon}{2})$

$= \overline{\int_A} f - \underline{\int_A} f + \varepsilon = 0 + \varepsilon = \varepsilon$

- **解释**: 通过上述不等式链，我们证明了 $P_\varepsilon$ 对应的上和与下和的差小于 $\varepsilon$，这就是黎曼条件。

$\Rightarrow$ 黎曼条件

因此 $\overline{\int_A} f = \underline{\int_A} f \Rightarrow f$ 可积。

- **解释**: 这完成了证明：黎曼条件蕴含函数可积。通过证明这些条件的等价性，我们深入理解了可积性的本质，并为积分的计算和应用奠定了基础。